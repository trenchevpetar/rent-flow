import{d as h,u as M,r as g,a as L,c as m,F as y,b as s,e as a,_ as k,w as V,f as B,g as f,o as l,h as j,i as A,j as U,C as x,I as q,Q as z,k as $,l as Q,m as D,n as b,p as _,q as C,s as R,t as T,v,x as G,y as N,z as I,A as K,B as H,T as X,D as P,E as Z,G as S}from"./index-Cj1jPttN.js";import{_ as J,a as O,T as E,b as F,c as W}from"./TheStat.vue_vue_type_script_setup_true_lang-VMo0TGW4.js";const Y={class:"fieldset w-full"},ee=h({__name:"AddPropertyForm",emits:["on-add-property"],setup(i,{emit:n}){const d=M(),o=n,t=g({name:"",location:"",ownerId:"",units:0}),{mutate:u,isPending:p}=L({mutationFn:j,onSuccess:()=>{d.invalidateQueries({queryKey:["ownerId"]})}}),c=()=>{u(t.value),o("on-add-property")};return(w,e)=>(l(),m(y,null,[s("form",{onSubmit:V(c,["prevent"]),class:"flex justify-center align-center items-center"},[s("fieldset",Y,[a(k,{modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value.name=r),label:"Name",placeholder:"Name"},null,8,["modelValue"]),a(k,{modelValue:t.value.location,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.location=r),label:"Street name",placeholder:"Location"},null,8,["modelValue"]),a(k,{modelValue:t.value.units,"onUpdate:modelValue":e[2]||(e[2]=r=>t.value.units=r),type:"number",label:"Units (How many units this property have?)",placeholder:"How many units this property have?"},null,8,["modelValue"]),e[3]||(e[3]=s("div",{class:"flex w-full justify-end gap-2 mt-2"},[s("button",{type:"submit",class:"btn btn-primary"}," Add property "),s("button",{class:"btn btn-soft"}," Cancel ")],-1))])],32),a(B,{"is-loading":f(p)},null,8,["is-loading"])],64))}});async function te(i){try{return(await U.listDocuments(x.DATABASE_ID,x.COLLECTIONS.INCOME,[z.equal("propertyId",i)])).documents}catch(n){throw console.log("error fetching incomes"),n}}async function ne(i){var o;const d=(o=A().currentUser)==null?void 0:o.$id;try{return await U.createDocument(x.DATABASE_ID,x.COLLECTIONS.INCOME,q.unique(),{...i,propertyId:d})}catch(t){console.log(t)}}const se={class:"fieldset w-full"},oe=h({__name:"AddIncomeForm",emits:["on-add-income"],setup(i,{emit:n}){const d=M(),o=n,t=g({propertyId:"",type:"",amount:0,datePaid:""}),{mutate:u,isPending:p}=L({mutationFn:ne,onSuccess:()=>{d.invalidateQueries({queryKey:["incomes"]})}}),c=()=>{u(t.value),o("on-add-income")};return(w,e)=>(l(),m(y,null,[s("form",{onSubmit:V(c,["prevent"]),class:"flex justify-center align-center items-center"},[s("fieldset",se,[a(k,{modelValue:t.value.type,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value.type=r),label:"Type",placeholder:"Type of income"},null,8,["modelValue"]),a(k,{modelValue:t.value.amount,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.amount=r),label:"Amount",placeholder:"Amount",type:"number"},null,8,["modelValue"]),a(J,{label:"Date paid",modelValue:t.value.datePaid,"onUpdate:modelValue":e[2]||(e[2]=r=>t.value.datePaid=r),type:"month"},null,8,["modelValue"]),e[3]||(e[3]=s("div",{class:"flex w-full justify-end gap-2 mt-2"},[s("button",{type:"submit",class:"btn btn-primary"}," Add income ")],-1))])],32),a(B,{"is-loading":f(p)},null,8,["is-loading"])],64))}}),ae={},le={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-12"};function re(i,n){return l(),m("svg",le,n[0]||(n[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"},null,-1)]))}const ie=$(ae,[["render",re]]);function de(i){return Q({queryKey:["incomes",i],queryFn:()=>te(i),enabled:D(()=>!!i),staleTime:1e3*60*5})}const ue={class:"card bg-base-100 shadow-sm mb-4"},ce={class:"card-body"},me=h({__name:"ListIncomes",setup(i){const n=A(),d=D(()=>{var u;return((u=n.currentUser)==null?void 0:u.$id)||""}),{data:o,isPending:t}=de(d.value);return(u,p)=>(l(),m(y,null,[p[0]||(p[0]=s("h1",{class:"title text-2xl mb-4"}," List Incomes ",-1)),f(t)?(l(),b(E,{key:0})):(l(),b(O,{key:1,class:"gap-4"},{default:_(()=>[(l(!0),m(y,null,C(f(o),c=>(l(),b(F,{key:c.datePaid,size:12,responsive:{sm:12,md:6,lg:6}},{default:_(()=>[s("div",ue,[s("div",ce,[a(W,{title:c.type,value:c.amount},{image:_(()=>[a(ie)]),_:2},1032,["title","value"])])])]),_:2},1024))),128))]),_:1}))],64))}}),pe={class:"title text-2xl mb-4"},fe={class:"card bg-base-100 shadow-sm mb-4"},_e={class:"card-body"},ve={class:"card-title"},ye={class:"card-actions justify-end"},be=h({__name:"ListProperties",setup(i){var u;const n=A(),{data:d,isPending:o}=R("ownerId",((u=n.currentUser)==null?void 0:u.$id)??""),{t}=T();return(p,c)=>{const w=G("RouterLink");return l(),m(y,null,[s("h1",pe,v(f(t)("properties.added")),1),a(O,{class:"gap-4"},{default:_(()=>[(l(!0),m(y,null,C(f(d),e=>(l(),b(F,{key:e.$id,size:12,responsive:{sm:12,md:6,lg:4}},{default:_(()=>[f(o)?(l(),b(E,{key:0})):N("",!0),s("div",fe,[s("div",_e,[s("h2",ve,v(e.name),1),s("ul",null,[s("li",null,v(f(t)("location"))+": "+v(e.location),1)]),s("div",ye,[a(w,{to:`/property-details/${e.$id}`,class:"btn btn-primary"},{default:_(()=>[I(v(f(t)("expenses.check")),1)]),_:2},1032,["to"])])])])]),_:2},1024))),128))]),_:1})],64)}}}),ge={},he={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function we(i,n){return l(),m("svg",he,n[0]||(n[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"},null,-1)]))}const ke=$(ge,[["render",we]]),xe={},$e={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function Ie(i,n){return l(),m("svg",$e,n[0]||(n[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)]))}const Ve=$(xe,[["render",Ie]]),Ae=["onClick"],Ce=h({__name:"FloatingBar",props:{actions:{}},setup(i,{emit:n}){const d=n,o=g(!1),t=()=>o.value=!o.value,u=g(null);function p(c){o.value&&u.value&&!u.value.contains(c.target)&&(o.value=!1)}return K(()=>{document.addEventListener("click",p)}),H(()=>{document.removeEventListener("click",p)}),(c,w)=>(l(),m("div",{ref_key:"fabRef",ref:u,class:"fixed bottom-6 right-6 z-50 flex flex-col items-end"},[a(X,{name:"fab",tag:"div",class:"flex flex-col items-end gap-3 mb-3"},{default:_(()=>[o.value?(l(!0),m(y,{key:0},C(c.actions,(e,r)=>(l(),m("button",{key:e.name,onClick:Me=>d(e.name),class:"btn btn-md bg-secondary text-white shadow-lg flex items-center gap-2 pr-4 pl-3 rounded-full",style:Z({transitionDelay:`${r*50}ms`})},[P(c.$slots,e.name,{},void 0,!0)],12,Ae))),128)):N("",!0)]),_:3}),s("button",{class:"btn btn-primary btn-circle text-white shadow-xl",onClick:V(t,["stop"])},[P(c.$slots,"toggle",{open:o.value},()=>[o.value?(l(),b(Ve,{key:1,class:"h-6 w-6"})):(l(),b(ke,{key:0,class:"h-6 w-6"}))],!0)])],512))}}),Pe=$(Ce,[["__scopeId","data-v-ecfcffd4"]]),Se={class:"title text-2xl"},Ue=h({__name:"DashboardPage",setup(i){const{t:n}=T(),d=g(!1),o=g(!1),t=()=>d.value=!0,u=()=>d.value=!1,p=()=>o.value=!0,c=()=>o.value=!1;return(w,e)=>(l(),m(y,null,[s("h1",Se,v(f(n)("dashboard")),1),e[2]||(e[2]=s("div",{class:"divider"},null,-1)),a(be),e[3]||(e[3]=s("div",{class:"divider"},null,-1)),a(me),a(Pe,{actions:[{name:"property"},{name:"income"}],onProperty:t,onIncome:p},{property:_(()=>[I(v(f(n)("properties.add")),1)]),income:_(()=>[I(v(f(n)("income.add")),1)]),_:1}),a(S,{title:"Add Property",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=r=>d.value=r)},{default:_(()=>[a(ee,{onOnAddProperty:u})]),_:1},8,["modelValue"]),a(S,{title:"Add Income",modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=r=>o.value=r)},{default:_(()=>[a(oe,{onOnAddIncome:c})]),_:1},8,["modelValue"])],64))}});export{Ue as default};
