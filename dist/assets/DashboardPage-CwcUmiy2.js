import{d as V,u as P,r as I,a as k,c as y,F as b,b as n,e as s,_ as h,w as S,f as L,g as d,o as u,h as q,i as w,j as U,C as A,I as O,Q as B,k as j,l as E,m as N,n as x,p as g,t as _,q as p,s as D,v as Q,x as z,y as K,z as $,A as C}from"./index-DUsfSx4R.js";import{_ as H,a as F,T as M,b as T,c as R,F as G}from"./FloatingBar-DFsJs5xp.js";const Z={class:"fieldset w-full"},J=V({__name:"AddPropertyForm",emits:["on-add-property"],setup(i,{emit:o}){const r=P(),a=o,t=I({name:"",location:"",ownerId:"",units:0}),{mutate:c,isPending:m}=k({mutationFn:q,onSuccess:()=>{r.invalidateQueries({queryKey:["ownerId"]})}}),v=()=>{c(t.value),a("on-add-property")};return(f,e)=>(u(),y(b,null,[n("form",{onSubmit:S(v,["prevent"]),class:"flex justify-center align-center items-center"},[n("fieldset",Z,[s(h,{modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.name=l),label:"Name",placeholder:"Name"},null,8,["modelValue"]),s(h,{modelValue:t.value.location,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.location=l),label:"Street name",placeholder:"Location"},null,8,["modelValue"]),s(h,{modelValue:t.value.units,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.units=l),type:"number",label:"Units (How many units this property have?)",placeholder:"How many units this property have?"},null,8,["modelValue"]),e[3]||(e[3]=n("div",{class:"flex w-full justify-end gap-2 mt-2"},[n("button",{type:"submit",class:"btn btn-primary"}," Add property "),n("button",{class:"btn btn-soft"}," Cancel ")],-1))])],32),s(L,{"is-loading":d(m)},null,8,["is-loading"])],64))}});async function W(i){try{return(await U.listDocuments(A.DATABASE_ID,A.COLLECTIONS.INCOME,[B.equal("propertyId",i)])).documents}catch(o){throw console.log("error fetching incomes"),o}}async function X(i){var a;const r=(a=w().currentUser)==null?void 0:a.$id;try{return await U.createDocument(A.DATABASE_ID,A.COLLECTIONS.INCOME,O.unique(),{...i,propertyId:r})}catch(t){console.log(t)}}const Y={class:"fieldset w-full"},ee=V({__name:"AddIncomeForm",emits:["on-add-income"],setup(i,{emit:o}){const r=P(),a=o,t=I({propertyId:"",type:"",amount:0,datePaid:""}),{mutate:c,isPending:m}=k({mutationFn:X,onSuccess:()=>{r.invalidateQueries({queryKey:["incomes"]})}}),v=()=>{c(t.value),a("on-add-income")};return(f,e)=>(u(),y(b,null,[n("form",{onSubmit:S(v,["prevent"]),class:"flex justify-center align-center items-center"},[n("fieldset",Y,[s(h,{modelValue:t.value.type,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.type=l),label:"Type",placeholder:"Type of income"},null,8,["modelValue"]),s(h,{modelValue:t.value.amount,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.amount=l),label:"Amount",placeholder:"Amount",type:"number"},null,8,["modelValue"]),s(H,{label:"Date paid",modelValue:t.value.datePaid,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.datePaid=l),type:"month"},null,8,["modelValue"]),e[3]||(e[3]=n("div",{class:"flex w-full justify-end gap-2 mt-2"},[n("button",{type:"submit",class:"btn btn-primary"}," Add income ")],-1))])],32),s(L,{"is-loading":d(m)},null,8,["is-loading"])],64))}}),te={},ne={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-12"};function se(i,o){return u(),y("svg",ne,o[0]||(o[0]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"},null,-1)]))}const oe=j(te,[["render",se]]);function ae(i){return E({queryKey:["incomes",i],queryFn:()=>W(i),enabled:N(()=>!!i),staleTime:1e3*60*5})}const le={class:"title text-2xl mb-4"},re={class:"card bg-base-100 shadow-sm mb-4"},de={class:"card-body"},ie=V({__name:"ListIncomes",setup(i){const o=w(),r=N(()=>{var m;return((m=o.currentUser)==null?void 0:m.$id)||""}),{data:a,isPending:t}=ae(r.value),{t:c}=x();return(m,v)=>(u(),y(b,null,[n("h1",le,_(d(c)("incomes.list")),1),d(t)?(u(),g(M,{key:0})):(u(),g(F,{key:1,class:"gap-4"},{default:p(()=>[(u(!0),y(b,null,D(d(a),f=>(u(),g(T,{key:f.datePaid,size:12,responsive:{sm:12,md:6,lg:6}},{default:p(()=>[n("div",re,[n("div",de,[s(R,{title:d(c)(`incomes.categories.${f.type.toLowerCase()}`),value:f.amount},{image:p(()=>[s(oe)]),_:2},1032,["title","value"])])])]),_:2},1024))),128))]),_:1}))],64))}}),ue={class:"title text-2xl mb-4"},ce={class:"card bg-base-100 shadow-sm mb-4"},me={class:"card-body"},pe={class:"card-title"},_e={class:"card-actions justify-end"},fe=V({__name:"ListProperties",setup(i){var c;const o=w(),{data:r,isPending:a}=Q("ownerId",((c=o.currentUser)==null?void 0:c.$id)??""),{t}=x();return(m,v)=>{const f=z("RouterLink");return u(),y(b,null,[n("h1",ue,_(d(t)("properties.added")),1),s(F,{class:"gap-4"},{default:p(()=>[(u(!0),y(b,null,D(d(r),e=>(u(),g(T,{key:e.$id,size:12,responsive:{sm:12,md:6,lg:4}},{default:p(()=>[d(a)?(u(),g(M,{key:0})):K("",!0),n("div",ce,[n("div",me,[n("h2",pe,_(e.name),1),n("ul",null,[n("li",null,_(d(t)("location"))+": "+_(e.location),1)]),n("div",_e,[s(f,{to:`/property-details/${e.$id}`,class:"btn btn-primary"},{default:p(()=>[$(_(d(t)("expenses.check")),1)]),_:2},1032,["to"])])])])]),_:2},1024))),128))]),_:1})],64)}}}),ye={class:"title text-2xl"},he=V({__name:"DashboardPage",setup(i){const{t:o}=x(),r=I(!1),a=I(!1),t=()=>r.value=!0,c=()=>r.value=!1,m=()=>a.value=!0,v=()=>a.value=!1;return(f,e)=>(u(),y(b,null,[n("h1",ye,_(d(o)("dashboard")),1),e[2]||(e[2]=n("div",{class:"divider"},null,-1)),s(fe),e[3]||(e[3]=n("div",{class:"divider"},null,-1)),s(ie),s(G,{actions:[{name:"property"},{name:"income"}],onProperty:t,onIncome:m},{property:p(()=>[$(_(d(o)("properties.add")),1)]),income:p(()=>[$(_(d(o)("income.add")),1)]),_:1}),s(C,{title:"Add Property",modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l)},{default:p(()=>[s(J,{onOnAddProperty:c})]),_:1},8,["modelValue"]),s(C,{title:"Add Income",modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value=l)},{default:p(()=>[s(ee,{onOnAddIncome:v})]),_:1},8,["modelValue"])],64))}});export{he as default};
